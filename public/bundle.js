var app=function(){"use strict";function noop(){}function run(e){return e()}function blank_object(){return Object.create(null)}function run_all(e){e.forEach(run)}function is_function(e){return"function"==typeof e}function safe_not_equal(e,n){return e!=e?n==n:e!==n||e&&"object"==typeof e||"function"==typeof e}function subscribe(e,n,t){const a=n.subscribe(t);e.$$.on_destroy.push(a.unsubscribe?()=>a.unsubscribe():a)}function append(e,n){e.appendChild(n)}function insert(e,n,t){e.insertBefore(n,t||null)}function detach(e){e.parentNode.removeChild(e)}function destroy_each(e,n){for(let t=0;t<e.length;t+=1)e[t]&&e[t].d(n)}function element(e){return document.createElement(e)}function text(e){return document.createTextNode(e)}function space(){return text(" ")}function empty(){return text("")}function listen(e,n,t,a){return e.addEventListener(n,t,a),()=>e.removeEventListener(n,t,a)}function prevent_default(e){return function(n){return n.preventDefault(),e.call(this,n)}}function attr(e,n,t){null==t?e.removeAttribute(n):e.setAttribute(n,t)}function children(e){return Array.from(e.childNodes)}function set_data(e,n){n=""+n,e.data!==n&&(e.data=n)}function set_style(e,n,t){e.style.setProperty(n,t)}function toggle_class(e,n,t){e.classList[t?"add":"remove"](n)}function custom_event(e,n){const t=document.createEvent("CustomEvent");return t.initCustomEvent(e,!1,!1,n),t}let current_component;function set_current_component(e){current_component=e}function get_current_component(){if(!current_component)throw new Error("Function called outside component initialization");return current_component}function onMount(e){get_current_component().$$.on_mount.push(e)}function afterUpdate(e){get_current_component().$$.after_render.push(e)}function createEventDispatcher(){const e=current_component;return(n,t)=>{const a=e.$$.callbacks[n];if(a){const i=custom_event(n,t);a.slice().forEach(n=>{n.call(e,i)})}}}function bubble(e,n){const t=e.$$.callbacks[n.type];t&&t.slice().forEach(e=>e(n))}const dirty_components=[],resolved_promise=Promise.resolve();let update_scheduled=!1;const binding_callbacks=[],render_callbacks=[],flush_callbacks=[];function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function add_binding_callback(e){binding_callbacks.push(e)}function add_render_callback(e){render_callbacks.push(e)}function add_flush_callback(e){flush_callbacks.push(e)}function flush(){const e=new Set;do{for(;dirty_components.length;){const e=dirty_components.shift();set_current_component(e),update(e.$$)}for(;binding_callbacks.length;)binding_callbacks.shift()();for(;render_callbacks.length;){const n=render_callbacks.pop();e.has(n)||(n(),e.add(n))}}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1}function update(e){e.fragment&&(e.update(e.dirty),run_all(e.before_render),e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_render.forEach(add_render_callback))}let outros;function group_outros(){outros={remaining:0,callbacks:[]}}function check_outros(){outros.remaining||run_all(outros.callbacks)}function on_outro(e){outros.callbacks.push(e)}function destroy_block(e,n){e.d(1),n.delete(e.key)}function outro_and_destroy_block(e,n){on_outro(()=>{destroy_block(e,n)}),e.o(1)}function update_keyed_each(e,n,t,a,i,l,r,o,s,c,d,u){let p=e.length,m=l.length,b=p;const _={};for(;b--;)_[e[b].key]=b;const g=[],h=new Map,f=new Map;for(b=m;b--;){const e=u(i,l,b),o=t(e);let s=r.get(o);s?a&&s.p(n,e):(s=c(o,e)).c(),h.set(o,g[b]=s),o in _&&f.set(o,Math.abs(b-_[o]))}const v=new Set,$=new Set;function y(e){e.i&&e.i(1),e.m(o,d),r.set(e.key,e),d=e.first,m--}for(;p&&m;){const n=g[m-1],t=e[p-1],a=n.key,i=t.key;n===t?(d=n.first,p--,m--):h.has(i)?!r.has(a)||v.has(a)?y(n):$.has(i)?p--:f.get(a)>f.get(i)?($.add(a),y(n)):(v.add(i),p--):(s(t,r),p--)}for(;p--;){const n=e[p];h.has(n.key)||s(n,r)}for(;m;)y(g[m-1]);return g}function bind(e,n,t){-1!==e.$$.props.indexOf(n)&&(e.$$.bound[n]=t,t(e.$$.ctx[n]))}function mount_component(e,n,t){const{fragment:a,on_mount:i,on_destroy:l,after_render:r}=e.$$;a.m(n,t),add_render_callback(()=>{const n=i.map(run).filter(is_function);l?l.push(...n):run_all(n),e.$$.on_mount=[]}),r.forEach(add_render_callback)}function destroy(e,n){e.$$&&(run_all(e.$$.on_destroy),e.$$.fragment.d(n),e.$$.on_destroy=e.$$.fragment=null,e.$$.ctx={})}function make_dirty(e,n){e.$$.dirty||(dirty_components.push(e),schedule_update(),e.$$.dirty=blank_object()),e.$$.dirty[n]=!0}function init(e,n,t,a,i,l){const r=current_component;set_current_component(e);const o=n.props||{},s=e.$$={fragment:null,ctx:null,props:l,update:noop,not_equal:i,bound:blank_object(),on_mount:[],on_destroy:[],before_render:[],after_render:[],context:new Map(r?r.$$.context:[]),callbacks:blank_object(),dirty:null};let c=!1;s.ctx=t?t(e,o,(n,t)=>{s.ctx&&i(s.ctx[n],s.ctx[n]=t)&&(s.bound[n]&&s.bound[n](t),c&&make_dirty(e,n))}):o,s.update(),c=!0,run_all(s.before_render),s.fragment=a(s.ctx),n.target&&(n.hydrate?s.fragment.l(children(n.target)):s.fragment.c(),n.intro&&e.$$.fragment.i&&e.$$.fragment.i(),mount_component(e,n.target,n.anchor),flush()),set_current_component(r)}class SvelteComponent{$destroy(){destroy(this,!0),this.$destroy=noop}$on(e,n){const t=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return t.push(n),()=>{const e=t.indexOf(n);-1!==e&&t.splice(e,1)}}$set(){}}const queryString="\nquery IntrospectionQuery {\n    __schema {\n      queryType {\n        ...FullType\n      }\n      mutationType {\n        ...FullType\n      }\n      subscriptionType {\n        name\n      }\n      types {\n        ...FullType\n      }\n      directives {\n        name\n        description\n        locations\n        args {\n          ...InputValue\n        }\n      }\n    }\n  }\n  \n  fragment FullType on __Type {\n    kind\n    name\n    description\n    fields(includeDeprecated: true) {\n      name\n      description\n      args {\n        ...InputValue\n      }\n      type {\n        ...TypeRef\n      }\n      isDeprecated\n      deprecationReason\n    }\n    inputFields {\n      ...InputValue\n    }\n    interfaces {\n      ...TypeRef\n    }\n    enumValues(includeDeprecated: true) {\n      name\n      description\n      isDeprecated\n      deprecationReason\n    }\n    possibleTypes {\n      ...TypeRef\n    }\n  }\n  \n  fragment InputValue on __InputValue {\n    name\n    description\n    type {\n      ...TypeRef\n    }\n    defaultValue\n  }\n  \n  fragment TypeRef on __Type {\n    kind\n    name\n    description\n    ofType {\n      kind\n      name\n      description\n      ofType {\n        kind\n        name\n        description\n        ofType {\n          kind\n          name\n          description\n          ofType {\n            kind\n            name\n            description\n            ofType {\n              kind\n              name\n              description\n              ofType {\n                kind\n                name\n                description\n                ofType {\n                  kind\n                  name\n                  description\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  \n\n";function create_fragment(e){var n;return{c(){(n=element("div")).className="self svelte-1rj0q3e"},m(t,a){insert(t,n,a),add_binding_callback(()=>e.div_binding(n,null))},p(e,t){e.items&&(t.div_binding(null,n),t.div_binding(n,null))},i:noop,o:noop,d(t){t&&detach(n),e.div_binding(null,n)}}}function instance(e,n,t){let a,{json:i}=n;return e.$set=(e=>{"json"in e&&t("json",i=e.json)}),e.$$.update=((e={elem:1,json:1})=>{if(e.elem||e.json)try{window.$(a).jsonViewer(i,{collapsed:!0,rootCollapsable:!1})}catch(e){}}),{json:i,elem:a,div_binding:function(e,n){t("elem",a=e)}}}class JsonView extends SvelteComponent{constructor(e){super(),init(this,e,instance,create_fragment,safe_not_equal,["json"])}}function create_if_block_1(e){var n,t,a,i,l,r,o=e.visible?"Hide":"Show";return{c(){n=element("a"),t=text(o),a=text(" scheme"),i=element("br"),l=element("br"),n.href=!0,r=listen(n,"click",prevent_default(e.click_handler))},m(e,r){insert(e,n,r),append(n,t),append(n,a),insert(e,i,r),insert(e,l,r)},p(e,n){e.visible&&o!==(o=n.visible?"Hide":"Show")&&set_data(t,o)},d(e){e&&(detach(n),detach(i),detach(l)),r()}}}function create_if_block(e){var n,t=new JsonView({props:{json:e.scheme}});return{c(){t.$$.fragment.c()},m(e,a){mount_component(t,e,a),n=!0},p(e,n){var a={};e.scheme&&(a.json=n.scheme),t.$set(a)},i(e){n||(t.$$.fragment.i(e),n=!0)},o(e){t.$$.fragment.o(e),n=!1},d(e){t.$destroy(e)}}}function create_fragment$1(e){var n,t,a,i,l,r,o,s,c,d,u,p,m,b,_,g,h,f=0!=Object.entries(e.scheme).length&&create_if_block_1(e),v=e.visible&&create_if_block(e);return{c(){n=element("div"),t=element("form"),a=element("div"),i=element("input"),l=space(),r=element("div"),o=element("input"),s=space(),(c=element("label")).textContent="Include credentials",d=space(),u=element("div"),p=space(),m=element("input"),b=space(),f&&f.c(),_=space(),v&&v.c(),i.className="text svelte-1prjgt0",attr(i,"type","text"),i.placeholder="https://yoursite.com/graphql",i.value=e.url,attr(o,"type","checkbox"),o.id="sss5678",o.title="include credentials to requests",c.htmlFor="sss5678",c.className="smaller svelte-1prjgt0",u.className="errors svelte-1prjgt0",attr(m,"type","submit"),m.id="subm444",m.className="button svelte-1prjgt0",m.value="↻ reload schema",t.className="row svelte-1prjgt0",h=listen(t,"submit",prevent_default(e.getSchema))},m(h,$){insert(h,n,$),append(n,t),append(t,a),append(a,i),add_binding_callback(()=>e.input0_binding(i,null)),append(a,l),append(a,r),append(r,o),add_binding_callback(()=>e.input1_binding(o,null)),append(r,s),append(r,c),append(a,d),append(a,u),add_binding_callback(()=>e.div1_binding(u,null)),append(t,p),append(t,m),add_binding_callback(()=>e.input2_binding(m,null)),append(n,b),f&&f.m(n,null),append(n,_),v&&v.m(n,null),g=!0},p(e,t){e.items&&(t.input0_binding(null,i),t.input0_binding(i,null)),g&&!e.url||(i.value=t.url),e.items&&(t.input1_binding(null,o),t.input1_binding(o,null)),e.items&&(t.div1_binding(null,u),t.div1_binding(u,null)),e.items&&(t.input2_binding(null,m),t.input2_binding(m,null)),0!=Object.entries(t.scheme).length?f?f.p(e,t):((f=create_if_block_1(t)).c(),f.m(n,_)):f&&(f.d(1),f=null),t.visible?v?(v.p(e,t),v.i(1)):((v=create_if_block(t)).c(),v.i(1),v.m(n,null)):v&&(group_outros(),on_outro(()=>{v.d(1),v=null}),v.o(1),check_outros())},i(e){g||(v&&v.i(),g=!0)},o(e){v&&v.o(),g=!1},d(t){t&&detach(n),e.input0_binding(null,i),e.input1_binding(null,o),e.div1_binding(null,u),e.input2_binding(null,m),f&&f.d(),v&&v.d(),h()}}}function instance$1(e,n,t){let a,i,{url:l="",scheme:r={},parentid:o="",urlElement:s,credentialsElement:c}=n,d=!1;const u=createEventDispatcher();return e.$set=(e=>{"url"in e&&t("url",l=e.url),"scheme"in e&&t("scheme",r=e.scheme),"parentid"in e&&t("parentid",o=e.parentid),"urlElement"in e&&t("urlElement",s=e.urlElement),"credentialsElement"in e&&t("credentialsElement",c=e.credentialsElement)}),{url:l,scheme:r,parentid:o,urlElement:s,credentialsElement:c,errorsElement:a,submitElement:i,visible:d,getSchema:async function(){a.innerText="",t("errorsElement",a),i.classList.add("inprogress");try{let e={headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},method:"POST",body:JSON.stringify({query:queryString,variables:{},operationName:"IntrospectionQuery"})};c.checked&&(console.log("Sending with credentials included = ",c.checked),e.credentials="include");let n=await fetch(s.value,e),i=await n.json();u("clear",{text:"clear storage"}),console.log("Schemer: clearSchema:",o),t("scheme",r=i)}catch(e){console.error("get scheme error:",e),a.innerText="get scheme error:"+e,t("errorsElement",a)}i.classList.remove("inprogress")},input0_binding:function(e,n){t("urlElement",s=e)},input1_binding:function(e,n){t("credentialsElement",c=e)},div1_binding:function(e,n){t("errorsElement",a=e)},input2_binding:function(e,n){t("submitElement",i=e)},click_handler:function(e){t("visible",d=!d)}}}class Schemer extends SvelteComponent{constructor(e){super(),init(this,e,instance$1,create_fragment$1,safe_not_equal,["url","scheme","parentid","urlElement","credentialsElement","getSchema"])}get getSchema(){return this.$$.ctx.getSchema}}function create_fragment$2(e){var n,t,a,i,l,r,o,s,c,d,u,p,m,b,_,g,h,f,v,$,y,k,x,T,N,C,E,w=e.node.name,F="NON_NULL"==e.node.type.kind?" !":"",S=e.node.description;return{c(){n=element("div"),t=element("input"),l=space(),r=element("span"),o=text(w),c=space(),d=element("input"),_=space(),g=element("span"),h=text(e.graphqlType),f=space(),v=element("span"),$=text(F),k=space(),x=element("br"),T=element("span"),N=text(S),t.id=a=e.parentid+"-"+e.node.name+"-checkbox",attr(t,"type","checkbox"),t.disabled=i="NON_NULL"==e.node.type.kind,t.className="svelte-17mekll",r.className=s="argname "+(e.checked?"":"disabled")+" svelte-17mekll",d.id=u=e.parentid+"-"+e.node.name+"-input",d.className="input svelte-17mekll",d.name=p=e.node.name,d.disabled=m=!e.checked,d.placeholder=b=""==e.value?"":null,v.className="exclamation svelte-17mekll",g.className=y="oftype "+(e.checked?"":"disabled")+" svelte-17mekll",T.className=C="description "+(e.checked?"":"disabled")+" svelte-17mekll",n.className="field svelte-17mekll",E=[listen(t,"change",e.input0_change_handler),listen(t,"change",e.change_handler),listen(d,"input",e.input1_input_handler),listen(d,"change",e.change_handler_1)]},m(a,i){insert(a,n,i),append(n,t),t.checked=e.checked,add_binding_callback(()=>e.input0_binding(t,null)),append(n,l),append(n,r),append(r,o),append(n,c),append(n,d),d.value=e.value,add_binding_callback(()=>e.input1_binding(d,null)),append(n,_),append(n,g),append(g,h),append(g,f),append(g,v),append(v,$),append(n,k),append(n,x),append(n,T),append(T,N)},p(e,n){e.checked&&(t.checked=n.checked),e.items&&(n.input0_binding(null,t),n.input0_binding(t,null)),(e.parentid||e.node)&&a!==(a=n.parentid+"-"+n.node.name+"-checkbox")&&(t.id=a),e.node&&i!==(i="NON_NULL"==n.node.type.kind)&&(t.disabled=i),e.node&&w!==(w=n.node.name)&&set_data(o,w),e.checked&&s!==(s="argname "+(n.checked?"":"disabled")+" svelte-17mekll")&&(r.className=s),e.value&&d.value!==n.value&&(d.value=n.value),e.items&&(n.input1_binding(null,d),n.input1_binding(d,null)),(e.parentid||e.node)&&u!==(u=n.parentid+"-"+n.node.name+"-input")&&(d.id=u),e.node&&p!==(p=n.node.name)&&(d.name=p),e.checked&&m!==(m=!n.checked)&&(d.disabled=m),e.value&&b!==(b=""==n.value?"":null)&&(d.placeholder=b),e.node&&F!==(F="NON_NULL"==n.node.type.kind?" !":"")&&set_data($,F),e.checked&&y!==(y="oftype "+(n.checked?"":"disabled")+" svelte-17mekll")&&(g.className=y),e.node&&S!==(S=n.node.description)&&set_data(N,S),e.checked&&C!==(C="description "+(n.checked?"":"disabled")+" svelte-17mekll")&&(T.className=C)},i:noop,o:noop,d(a){a&&detach(n),e.input0_binding(null,t),e.input1_binding(null,d),run_all(E)}}}function instance$2(e,n,t){let a,i,l,{parentid:r="",node:o={},getText:s=function(){if(!i.checked)return"";let e=l.value;return"String"==d&&(e=`"${e.replace(/"/g,'\\"')}"`),`${o.name}: ${e}`}}=n,c=!0,d=o.type.name||o.type.ofType.name;o.defaultValue?t("value",a="String"==d?o.defaultValue.replace(/"/g,""):o.defaultValue):t("value",a="Int"==d?0:"Boolean"!=d&&("String"==d?o.name.replace(/_/g," "):null));let u="Int"==d?"number":"text";return onMount(async()=>{l.setAttribute("type",u)}),e.$set=(e=>{"parentid"in e&&t("parentid",r=e.parentid),"node"in e&&t("node",o=e.node),"getText"in e&&t("getText",s=e.getText)}),{parentid:r,node:o,getText:s,checked:c,graphqlType:d,value:a,checkboxElement:i,inputElement:l,change_handler:function(n){bubble(e,n)},change_handler_1:function(n){bubble(e,n)},input0_change_handler:function(){c=this.checked,t("checked",c)},input0_binding:function(e,n){t("checkboxElement",i=e)},input1_input_handler:function(){a=this.value,t("value",a)},input1_binding:function(e,n){t("inputElement",l=e)}}}class Argument extends SvelteComponent{constructor(e){super(),init(this,e,instance$2,create_fragment$2,safe_not_equal,["parentid","node","getText"])}}function create_if_block$1(e){var n,t,a;return{c(){attr(n=element("input"),"type","checkbox"),n.checked=!0,n.id=t=e.parentid+"-"+e.fieldName,n.className="svelte-1y7pqhv",a=listen(n,"change",e.change_handler)},m(t,a){insert(t,n,a),add_binding_callback(()=>e.input_binding(n,null))},p(e,a){e.items&&(a.input_binding(null,n),a.input_binding(n,null)),e.parentid&&t!==(t=a.parentid+"-"+a.fieldName)&&(n.id=t)},d(t){t&&detach(n),e.input_binding(null,n),a()}}}function create_fragment$3(e){var n,t,a,i,l,r,o,s,c,d,u,p=e.node.description,m=e.showCheckbox&&create_if_block$1(e);function b(n){e.type_getText_binding.call(null,n),r=!0,add_flush_callback(()=>r=!1)}let _={scheme:e.scheme,typeName:e.typeName,showCheckbox:e.showCheckbox,level:e.level,padding:e.padding,parentid:e.parentid+"-"+e.fieldName+"-type"};void 0!==e.getTypeText&&(_.getText=e.getTypeText);var g=new Type({props:_});return add_binding_callback(()=>bind(g,"getText",b)),g.$on("change",e.change_handler_1),{c(){n=element("div"),m&&m.c(),t=space(),a=element("span"),i=text(e.fieldName),l=space(),g.$$.fragment.c(),o=space(),s=element("br"),c=element("span"),d=text(p),a.className="field-name svelte-1y7pqhv",s.className="svelte-1y7pqhv",c.className="field-description svelte-1y7pqhv",n.className="field svelte-1y7pqhv"},m(e,r){insert(e,n,r),m&&m.m(n,null),append(n,t),append(n,a),append(a,i),append(n,l),mount_component(g,n,null),append(n,o),append(n,s),append(n,c),append(c,d),u=!0},p(e,a){a.showCheckbox?m?m.p(e,a):((m=create_if_block$1(a)).c(),m.m(n,t)):m&&(m.d(1),m=null);var i={};e.scheme&&(i.scheme=a.scheme),e.typeName&&(i.typeName=a.typeName),e.showCheckbox&&(i.showCheckbox=a.showCheckbox),e.level&&(i.level=a.level),e.padding&&(i.padding=a.padding),(e.parentid||e.fieldName)&&(i.parentid=a.parentid+"-"+a.fieldName+"-type"),!r&&e.getTypeText&&(i.getText=a.getTypeText),g.$set(i),u&&!e.node||p===(p=a.node.description)||set_data(d,p)},i(e){u||(g.$$.fragment.i(e),u=!0)},o(e){g.$$.fragment.o(e),u=!1},d(e){e&&detach(n),m&&m.d(),g.$destroy()}}}function instance$3(e,n,t){let a,i,{parentid:l="",scheme:r,node:o,showCheckbox:s=!0,level:c=0,padding:d="  ",getText:u=function(e){if(!i)return"";if(0==i.checked)return"";return p+a()}}=n,p=o.name,m="LIST"==o.type.kind?o.type.ofType.name:o.type.name;return e.$set=(e=>{"parentid"in e&&t("parentid",l=e.parentid),"scheme"in e&&t("scheme",r=e.scheme),"node"in e&&t("node",o=e.node),"showCheckbox"in e&&t("showCheckbox",s=e.showCheckbox),"level"in e&&t("level",c=e.level),"padding"in e&&t("padding",d=e.padding),"getText"in e&&t("getText",u=e.getText)}),{parentid:l,scheme:r,node:o,showCheckbox:s,level:c,padding:d,getText:u,fieldName:p,typeName:m,getTypeText:a,checkboxElement:i,change_handler:function(n){bubble(e,n)},change_handler_1:function(n){bubble(e,n)},input_binding:function(e,n){t("checkboxElement",i=e)},type_getText_binding:function(e){t("getTypeText",a=e)}}}class TypeField extends SvelteComponent{constructor(e){super(),init(this,e,instance$3,create_fragment$3,safe_not_equal,["parentid","scheme","node","showCheckbox","level","padding","getText"])}}function get_each_context(e,n,t){const a=Object.create(e);return a.f=n[t],a.ind=t,a}function create_if_block$2(e){var n,t,a,i,l=[create_if_block_1$1,create_else_block],r=[];function o(e){return"SCALAR"==e.node.kind?0:1}return t=o(e),a=r[t]=l[t](e),{c(){n=element("div"),a.c(),n.className="self svelte-jn0n43"},m(e,a){insert(e,n,a),r[t].m(n,null),i=!0},p(e,i){var s=t;(t=o(i))===s?r[t].p(e,i):(group_outros(),on_outro(()=>{r[s].d(1),r[s]=null}),a.o(1),check_outros(),(a=r[t])||(a=r[t]=l[t](i)).c(),a.i(1),a.m(n,null))},i(e){i||(a&&a.i(),i=!0)},o(e){a&&a.o(),i=!1},d(e){e&&detach(n),r[t].d()}}}function create_else_block(e){var n,t,a,i,l,r,o,s,c,d,u=e.node.description,p=e.node.fields&&create_if_block_2(e);return{c(){n=element("a"),t=text(e.typeName),i=space(),l=element("div"),r=element("span"),o=text(u),s=space(),p&&p.c(),n.className=a=(e.vis?"opened":"closed")+" svelte-jn0n43",n.href=!0,r.className="description svelte-jn0n43",l.className="frame svelte-jn0n43",set_style(l,"display",e.vis?"block":"none"),d=listen(n,"click",prevent_default(e.click_handler))},m(e,a){insert(e,n,a),append(n,t),insert(e,i,a),insert(e,l,a),append(l,r),append(r,o),append(l,s),p&&p.m(l,null),c=!0},p(e,i){c&&!e.typeName||set_data(t,i.typeName),c&&!e.vis||a===(a=(i.vis?"opened":"closed")+" svelte-jn0n43")||(n.className=a),i.node.fields?p?(p.p(e,i),p.i(1)):((p=create_if_block_2(i)).c(),p.i(1),p.m(l,null)):p&&(group_outros(),on_outro(()=>{p.d(1),p=null}),p.o(1),check_outros()),c&&!e.vis||set_style(l,"display",i.vis?"block":"none")},i(e){c||(p&&p.i(),c=!0)},o(e){p&&p.o(),c=!1},d(e){e&&(detach(n),detach(i),detach(l)),p&&p.d(),d()}}}function create_if_block_1$1(e){var n,t;return{c(){n=element("span"),t=text(e.typeName),n.className="scalar-type svelte-jn0n43"},m(e,a){insert(e,n,a),append(n,t)},p(e,n){e.typeName&&set_data(t,n.typeName)},i:noop,o:noop,d(e){e&&detach(n)}}}function create_if_block_2(e){for(var n,t,a=e.node.fields,i=[],l=0;l<a.length;l+=1)i[l]=create_each_block(get_each_context(e,a,l));function r(e,n,t){i[e]&&(n&&on_outro(()=>{i[e].d(n),i[e]=null}),i[e].o(t))}return{c(){n=element("div");for(var e=0;e<i.length;e+=1)i[e].c();n.className="fieldlist svelte-jn0n43"},m(e,a){insert(e,n,a);for(var l=0;l<i.length;l+=1)i[l].m(n,null);t=!0},p(e,t){if(e.showCheckbox||e.scheme||e.level||e.padding||e.node||e.parentid||e.typeName||e.fieldFunctions){a=t.node.fields;for(var l=0;l<a.length;l+=1){const r=get_each_context(t,a,l);i[l]?(i[l].p(e,r),i[l].i(1)):(i[l]=create_each_block(r),i[l].c(),i[l].i(1),i[l].m(n,null))}for(group_outros();l<i.length;l+=1)r(l,1,1);check_outros()}},i(e){if(!t){for(var n=0;n<a.length;n+=1)i[n].i();t=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)r(e,0);t=!1},d(e){e&&detach(n),destroy_each(i,e)}}}function create_each_block(e){var n,t;function a(t){e.typefield_getText_binding.call(null,t,e),n=!0,add_flush_callback(()=>n=!1)}let i={showCheckbox:e.showCheckbox,scheme:e.scheme,level:e.level+1,padding:e.padding,node:e.f,parentid:e.parentid+"-"+e.typeName};void 0!==e.fieldFunctions[e.f.name]&&(i.getText=e.fieldFunctions[e.f.name]);var l=new TypeField({props:i});return add_binding_callback(()=>bind(l,"getText",a)),l.$on("change",e.change_handler),{c(){l.$$.fragment.c()},m(e,n){mount_component(l,e,n),t=!0},p(t,a){e=a;var i={};t.showCheckbox&&(i.showCheckbox=e.showCheckbox),t.scheme&&(i.scheme=e.scheme),t.level&&(i.level=e.level+1),t.padding&&(i.padding=e.padding),t.node&&(i.node=e.f),(t.parentid||t.typeName)&&(i.parentid=e.parentid+"-"+e.typeName),(!n&&t.fieldFunctions||t.node)&&(i.getText=e.fieldFunctions[e.f.name]),l.$set(i)},i(e){t||(l.$$.fragment.i(e),t=!0)},o(e){l.$$.fragment.o(e),t=!1},d(e){l.$destroy(e)}}}function create_fragment$4(e){var n,t,a=e.node&&create_if_block$2(e);return{c(){a&&a.c(),n=empty()},m(e,i){a&&a.m(e,i),insert(e,n,i),t=!0},p(e,t){t.node?a?(a.p(e,t),a.i(1)):((a=create_if_block$2(t)).c(),a.i(1),a.m(n.parentNode,n)):a&&(group_outros(),on_outro(()=>{a.d(1),a=null}),a.o(1),check_outros())},i(e){t||(a&&a.i(),t=!0)},o(e){a&&a.o(),t=!1},d(e){a&&a.d(e),e&&detach(n)}}}function getNode(e,n){if(e&&e.data&&e.data.__schema){let t=e.data.__schema.types.filter(e=>e.name==n);return t.length>0?t[0]:null}return null}function instance$4(e,n,t){let{parentid:a="",scheme:i={},typeName:l="",showCheckbox:r=!0,level:o=0,padding:s="  ",getText:c=function(){let e=[];for(let n in d){let t=d[n]();t&&e.push(s.repeat(o+1)+t)}return e.length>0?" {\n"+e.join("\n")+"\n"+s.repeat(o)+"}":""}}=n,d={},u=getNode(i,l),p=!1;return e.$set=(e=>{"parentid"in e&&t("parentid",a=e.parentid),"scheme"in e&&t("scheme",i=e.scheme),"typeName"in e&&t("typeName",l=e.typeName),"showCheckbox"in e&&t("showCheckbox",r=e.showCheckbox),"level"in e&&t("level",o=e.level),"padding"in e&&t("padding",s=e.padding),"getText"in e&&t("getText",c=e.getText)}),{parentid:a,scheme:i,typeName:l,showCheckbox:r,level:o,padding:s,getText:c,fieldFunctions:d,node:u,vis:p,change_handler:function(n){bubble(e,n)},click_handler:function(e){const n=p=!p;return t("vis",p),n},typefield_getText_binding:function(e,{f:n}){d[n.name]=e,t("fieldFunctions",d)}}}class Type extends SvelteComponent{constructor(e){super(),init(this,e,instance$4,create_fragment$4,safe_not_equal,["parentid","scheme","typeName","showCheckbox","level","padding","getText"])}}function noop$1(){}function safe_not_equal$1(e,n){return e!=e?n==n:e!==n||e&&"object"==typeof e||"function"==typeof e}function writable(e,n=noop$1){let t;const a=[];function i(n){if(safe_not_equal$1(e,n)){if(e=n,!t)return;a.forEach(e=>e[1]()),a.forEach(n=>n[0](e))}}return{set:i,update:function(n){i(n(e))},subscribe:function(l,r=noop$1){const o=[l,r];return a.push(o),1===a.length&&(t=n(i)||noop$1),l(e),()=>{const e=a.indexOf(o);-1!==e&&a.splice(e,1),0===a.length&&t()}}}}const changeCount=writable(0);function get_each_context$1(e,n,t){const a=Object.create(e);return a.arg=n[t],a}function create_if_block_1$2(e){var n,t,a,i,l,r,o,s,c=e.node.name,d=[],u=new Map,p=e.node.args;const m=e=>e.arg.name;for(var b=0;b<p.length;b+=1){let n=get_each_context$1(e,p,b),t=m(n);u.set(t,d[b]=create_each_block$1(t,n))}return{c(){for(n=element("h3"),t=text(c),a=text("(...)"),i=space(),(l=element("div")).textContent="ARGUMENTS",r=space(),o=element("div"),b=0;b<d.length;b+=1)d[b].c();n.className="svelte-1t1sfac",l.className="header svelte-1t1sfac",o.className="fieldlist svelte-1t1sfac"},m(e,c){for(insert(e,n,c),append(n,t),append(n,a),insert(e,i,c),insert(e,l,c),insert(e,r,c),insert(e,o,c),b=0;b<d.length;b+=1)d[b].m(o,null);s=!0},p(e,n){s&&!e.node||c===(c=n.node.name)||set_data(t,c);const a=n.node.args;group_outros(),d=update_keyed_each(d,e,m,1,n,a,u,o,outro_and_destroy_block,create_each_block$1,null,get_each_context$1),check_outros()},i(e){if(!s){for(var n=0;n<p.length;n+=1)d[n].i();s=!0}},o(e){for(b=0;b<d.length;b+=1)d[b].o();s=!1},d(e){for(e&&(detach(n),detach(i),detach(l),detach(r),detach(o)),b=0;b<d.length;b+=1)d[b].d()}}}function create_each_block$1(e,n){var t,a,i;function l(e){n.argument_getText_binding.call(null,e,n),a=!0,add_flush_callback(()=>a=!1)}let r={node:n.arg,parentid:n.parentid+"-"+n.node.name+"-argument"};void 0!==n.getArgFunctions[n.arg.name]&&(r.getText=n.getArgFunctions[n.arg.name]);var o=new Argument({props:r});return add_binding_callback(()=>bind(o,"getText",l)),o.$on("change",n.generateQuery),{key:e,first:null,c(){t=empty(),o.$$.fragment.c(),this.first=t},m(e,n){insert(e,t,n),mount_component(o,e,n),i=!0},p(e,t){n=t;var i={};e.node&&(i.node=n.arg),(e.parentid||e.node)&&(i.parentid=n.parentid+"-"+n.node.name+"-argument"),(!a&&e.getArgFunctions||e.node)&&(i.getText=n.getArgFunctions[n.arg.name]),o.$set(i)},i(e){i||(o.$$.fragment.i(e),i=!0)},o(e){o.$$.fragment.o(e),i=!1},d(e){e&&detach(t),o.$destroy(e)}}}function create_if_block$3(e){var n,t,a,i;return{c(){(n=element("span")).textContent='name="file"',t=element("br"),a=space(),attr(i=element("input"),"type","file"),i.name="file"},m(e,l){insert(e,n,l),insert(e,t,l),insert(e,a,l),insert(e,i,l)},d(e){e&&(detach(n),detach(t),detach(a),detach(i))}}}function create_fragment$5(e){var n,t,a,i,l,r,o,s,c,d,u,p,m,b,_,g,h,f,v,$,y,k,x,T,N,C,E,w,F,S,q,M,A,j,I,O,R,L,D,V,B,J,U,Q,H,P,z,G,K,W,Y,X,Z,ee,ne,te,ae,ie,le,re,oe,se,ce,de,ue,pe,me,be,_e,ge,he,fe,ve,$e,ye,ke=e.node.name,xe=e.node.description,Te="LIST"==e.node.type.kind?"[...]":"",Ne=e.response?"":null,Ce=e.node.args&&create_if_block_1$2(e);function Ee(n){e.type_getText_binding.call(null,n),y=!0,add_flush_callback(()=>y=!1)}let we={typeName:e.node.type.name||e.node.type.ofType.name,scheme:e.scheme,parentid:e.parentid+"-"+e.node.name,level:1};void 0!==e.getTypeText&&(we.getText=e.getTypeText);var Fe=new Type({props:we});add_binding_callback(()=>bind(Fe,"getText",Ee)),Fe.$on("change",e.generateQuery);var Se=e.attachFileCheckboxChecked&&create_if_block$3(e);return{c(){n=element("div"),t=element("div"),a=element("a"),i=text(ke),l=text("(...)"),o=space(),s=element("span"),c=space(),d=element("span"),u=text(xe),p=space(),m=element("div"),b=element("div"),Ce&&Ce.c(),_=space(),g=element("div"),h=element("div"),f=text("RETURN "),v=text(Te),$=space(),Fe.$$.fragment.c(),k=space(),x=element("form"),T=element("div"),(N=element("div")).textContent="QUERY",C=space(),E=element("div"),w=element("textarea"),S=space(),q=element("div"),(M=element("div")).textContent="VARIABLES",A=space(),j=element("div"),I=element("textarea"),R=space(),(L=element("div")).innerHTML='<input type="submit" class="button  svelte-1t1sfac" value="query & run test">',D=space(),V=element("div"),B=element("div"),J=element("input"),U=space(),(Q=element("span")).innerHTML='<span style="font-weight:bold; color:black">Attach file.</span>\n\t\t\t                        Sets Content-Type to\n\t\t\t                        <br>application/x-www-form-urlencoded\n\t\t\t                    ',H=space(),P=element("div"),Se&&Se.c(),z=space(),G=element("div"),(K=element("div")).textContent="RESPONSE",W=space(),Y=element("div"),X=element("span"),Z=text(Ne),ee=space(),ne=element("div"),te=space(),ae=element("div"),ie=element("div"),(le=element("span")).textContent="Response saved in variable 'response'",re=space(),oe=element("br"),(se=element("span")).textContent="DEFINE TEST &",ce=space(),de=element("input"),ue=space(),pe=element("div"),me=element("textarea"),_e=space(),ge=element("div"),he=element("span"),fe=space(),ve=element("span"),a.className=r="name "+(e.vis?"opened":"closed")+" svelte-1t1sfac",a.href=!0,s.className="test-result svelte-1t1sfac",d.className="description svelte-1t1sfac",t.className="outer svelte-1t1sfac",h.className="header svelte-1t1sfac",b.className="form-area svelte-1t1sfac",N.className="header svelte-1t1sfac",w.id=F=e.parentid+"-"+e.node.name+"-query",w.name="query",w.value=e.request,w.className="svelte-1t1sfac",E.className="queryFrame svelte-1t1sfac",M.className="header svelte-1t1sfac",I.id=O=e.parentid+"-"+e.node.name+"-variables",I.name="variables",I.value="{}",I.className="svelte-1t1sfac",j.className="variablesFrame svelte-1t1sfac",L.className="buttons svelte-1t1sfac",attr(J,"type","checkbox"),set_style(J,"vertical-align","top"),Q.className="description svelte-1t1sfac",B.className="margined svelte-1t1sfac",P.className="margined svelte-1t1sfac",x.className="svelte-1t1sfac",K.className="header svelte-1t1sfac",X.className="json-literal",ne.className="response svelte-1t1sfac",Y.className="response-area svelte-1t1sfac",le.className="description svelte-1t1sfac",attr(de,"type","button"),de.className="button svelte-1t1sfac",de.value="run test ▶",ie.className="header svelte-1t1sfac",me.id=be=e.parentid+"-"+e.node.name+"-eval-text",me.value="response && !response.errors",me.className="svelte-1t1sfac",pe.className="evalFrame svelte-1t1sfac",he.className="eval-result svelte-1t1sfac",ve.className="eval-errors svelte-1t1sfac",ge.className="buttons2 svelte-1t1sfac",G.className="result-panel svelte-1t1sfac",m.className="root shadow svelte-1t1sfac",set_style(m,"display",e.vis?"grid":"none"),ye=[listen(a,"click",prevent_default(e.toggleVisibility)),listen(w,"change",e.incChangeCounter),listen(I,"change",e.incChangeCounter),listen(J,"change",e.change_handler),listen(x,"submit",e.submitForm),listen(de,"click",e.evaluate),listen(me,"change",e.incChangeCounter)]},m(r,y){insert(r,n,y),append(n,t),append(t,a),append(a,i),append(a,l),append(t,o),append(t,s),s.innerHTML=e.testResult,append(t,c),append(t,d),append(d,u),append(n,p),append(n,m),append(m,b),Ce&&Ce.m(b,null),append(b,_),append(b,g),append(g,h),append(h,f),append(h,v),append(g,$),mount_component(Fe,g,null),add_binding_callback(()=>e.div3_binding(b,null)),append(m,k),append(m,x),append(x,T),append(T,N),append(T,C),append(T,E),append(E,w),add_binding_callback(()=>e.textarea0_binding(w,null)),add_binding_callback(()=>e.div5_binding(E,null)),append(x,S),append(x,q),append(q,M),append(q,A),append(q,j),append(j,I),add_binding_callback(()=>e.textarea1_binding(I,null)),add_binding_callback(()=>e.div8_binding(j,null)),append(x,R),append(x,L),append(x,D),append(x,V),append(V,B),append(B,J),add_binding_callback(()=>e.input1_binding(J,null)),append(B,U),append(B,Q),append(V,H),append(V,P),Se&&Se.m(P,null),add_binding_callback(()=>e.form_1_binding(x,null)),append(m,z),append(m,G),append(G,K),append(G,W),append(G,Y),append(Y,X),append(X,Z),append(Y,ee),append(Y,ne),add_binding_callback(()=>e.div15_binding(ne,null)),append(G,te),append(G,ae),append(ae,ie),append(ie,le),append(ie,re),append(ie,oe),append(ie,se),append(ie,ce),append(ie,de),append(ae,ue),append(ae,pe),append(pe,me),add_binding_callback(()=>e.textarea2_binding(me,null)),add_binding_callback(()=>e.div18_binding(pe,null)),append(ae,_e),append(ae,ge),append(ge,he),he.innerHTML=e.testResult,append(ge,fe),append(ge,ve),ve.innerHTML=e.evalErrors,$e=!0},p(e,n){$e&&!e.node||ke===(ke=n.node.name)||set_data(i,ke),$e&&!e.vis||r===(r="name "+(n.vis?"opened":"closed")+" svelte-1t1sfac")||(a.className=r),$e&&!e.testResult||(s.innerHTML=n.testResult),$e&&!e.node||xe===(xe=n.node.description)||set_data(u,xe),n.node.args?Ce?(Ce.p(e,n),Ce.i(1)):((Ce=create_if_block_1$2(n)).c(),Ce.i(1),Ce.m(b,_)):Ce&&(group_outros(),on_outro(()=>{Ce.d(1),Ce=null}),Ce.o(1),check_outros()),$e&&!e.node||Te===(Te="LIST"==n.node.type.kind?"[...]":"")||set_data(v,Te);var t={};e.node&&(t.typeName=n.node.type.name||n.node.type.ofType.name),e.scheme&&(t.scheme=n.scheme),(e.parentid||e.node)&&(t.parentid=n.parentid+"-"+n.node.name),!y&&e.getTypeText&&(t.getText=n.getTypeText),Fe.$set(t),e.items&&(n.div3_binding(null,b),n.div3_binding(b,null)),e.items&&(n.textarea0_binding(null,w),n.textarea0_binding(w,null)),$e&&!e.parentid&&!e.node||F===(F=n.parentid+"-"+n.node.name+"-query")||(w.id=F),$e&&!e.request||(w.value=n.request),e.items&&(n.div5_binding(null,E),n.div5_binding(E,null)),e.items&&(n.textarea1_binding(null,I),n.textarea1_binding(I,null)),$e&&!e.parentid&&!e.node||O===(O=n.parentid+"-"+n.node.name+"-variables")||(I.id=O),e.items&&(n.div8_binding(null,j),n.div8_binding(j,null)),e.items&&(n.input1_binding(null,J),n.input1_binding(J,null)),n.attachFileCheckboxChecked?Se||((Se=create_if_block$3(n)).c(),Se.m(P,null)):Se&&(Se.d(1),Se=null),e.items&&(n.form_1_binding(null,x),n.form_1_binding(x,null)),$e&&!e.response||Ne===(Ne=n.response?"":null)||set_data(Z,Ne),e.items&&(n.div15_binding(null,ne),n.div15_binding(ne,null)),e.items&&(n.textarea2_binding(null,me),n.textarea2_binding(me,null)),$e&&!e.parentid&&!e.node||be===(be=n.parentid+"-"+n.node.name+"-eval-text")||(me.id=be),e.items&&(n.div18_binding(null,pe),n.div18_binding(pe,null)),$e&&!e.testResult||(he.innerHTML=n.testResult),$e&&!e.evalErrors||(ve.innerHTML=n.evalErrors),$e&&!e.vis||set_style(m,"display",n.vis?"grid":"none")},i(e){$e||(Ce&&Ce.i(),Fe.$$.fragment.i(e),$e=!0)},o(e){Ce&&Ce.o(),Fe.$$.fragment.o(e),$e=!1},d(t){t&&detach(n),Ce&&Ce.d(),Fe.$destroy(),e.div3_binding(null,b),e.textarea0_binding(null,w),e.div5_binding(null,E),e.textarea1_binding(null,I),e.div8_binding(null,j),e.input1_binding(null,J),Se&&Se.d(),e.form_1_binding(null,x),e.div15_binding(null,ne),e.textarea2_binding(null,me),e.div18_binding(null,pe),run_all(ye)}}}function onCodeMirrorChange(e){var n=e.getDoc().getValue();e.getTextArea().value=n}function instance$5($$self,$$props,$$invalidate){let $changeCount;subscribe($$self,changeCount,e=>{$$invalidate("$changeCount",$changeCount=e)});let{urlElement:urlElement,credentialsElement:credentialsElement,parentid:parentid="",scheme:scheme={},node:node={},operation:operation="",test:test=submitForm}=$$props,testResult="",evalErrors="",vis=!1,request,response=null,responseArea,evalTextarea,evalCodeMirror,variablesTextarea,variablesCodeMirror,queryTextarea,queryCodeMirror,queryFrame,variablesFrame,evalFrame,form,attachFileCheckbox,attachFileCheckboxChecked=!1,formArea,getTypeText,getArgFunctions={};function getArgsText(){let e=[];for(let[n,t]of Object.entries(getArgFunctions)){let n=t();n&&e.push(n)}return 0==e.length?"":`(\n${e.join(",\n")}\n)`}function generateQuery(e){console.log("generateQuery:",e);let n=getArgsText(),t=getTypeText?getTypeText():"";$$invalidate("request",request=`${operation} {\n${node.name}${n}${t}\n}`),queryCodeMirror&&queryCodeMirror.getDoc().setValue(request),incChangeCounter()}function fixEmptyVariablesField(){let e=variablesTextarea.value;e&&e.trim()||(console.log("Fixing empty variable field"),variablesCodeMirror.setValue("{}"))}function submitForm(e){return e&&e.preventDefault(),console.log("submitForm credentialsElement=",credentialsElement.checked," urlElement.value=",urlElement.value),$$invalidate("response",response=null),responseArea.innerHTML="",$$invalidate("responseArea",responseArea),fixEmptyVariablesField(),attachFileCheckbox.checked?submitFormMultipart():submitFormInJSON(),!1}function onFormSubmitSuccess(e){$$invalidate("response",response=e),window.$(responseArea).jsonViewer(e,{collapsed:!0,rootCollapsable:!1}),evaluate()}function submitFormMultipart(){window.$(form).ajaxSubmit({url:urlElement.value,type:"POST",xhrFields:{withCredentials:credentialsElement.checked},success:onFormSubmitSuccess,error:e=>{console.log("-------------------"),window.$(responseArea).jsonViewer(JSON.parse(JSON.stringify(e)),{collapsed:!0,rootCollapsable:!1})}})}async function submitFormInJSON(){try{let e={headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},method:"POST",body:JSON.stringify({query:queryTextarea.value,variables:variablesTextarea.value,operationName:null})};credentialsElement.checked&&(e.credentials="include");let n=await fetch(urlElement.value,e);onFormSubmitSuccess(await n.json())}catch(e){console.error("Submit form error --------------------------------\n",e),responseArea.innerText=String(e),$$invalidate("responseArea",responseArea)}}function evaluate(){$$invalidate("testResult",testResult=""),$$invalidate("evalErrors",evalErrors="");let code=evalTextarea.value;if(code=code.trimStart(),code=code.trimEnd(),""!=code)try{let result=eval(code);$$invalidate("testResult",testResult=result)}catch(e){console.log(e),$$invalidate("evalErrors",evalErrors=e)}else $$invalidate("evalErrors",evalErrors="<br>// Write code to evaluate server response.<br>// For example:<br>response.errors == null")}function incChangeCounter(e){console.log("incChangeCounter",$changeCount,e),$changeCount+=1,changeCount.set($changeCount)}let jsOptions={mode:"javascript",extraKeys:{"Ctrl-Space":"autocomplete"},autoRefresh:!0,autoCloseBrackets:!0,matchBrackets:!0,tabSize:2,theme:"eclipse"};function addCodeMirrors(){evalCodeMirror||($$invalidate("evalCodeMirror",evalCodeMirror=CodeMirror.fromTextArea(evalTextarea,jsOptions)),evalCodeMirror.on("blur",incChangeCounter),evalCodeMirror.on("change",onCodeMirrorChange)),variablesCodeMirror||($$invalidate("variablesCodeMirror",variablesCodeMirror=CodeMirror.fromTextArea(variablesTextarea,jsOptions)),variablesCodeMirror.on("blur",incChangeCounter),variablesCodeMirror.on("change",onCodeMirrorChange)),queryCodeMirror||($$invalidate("queryCodeMirror",queryCodeMirror=CodeMirror.fromTextArea(queryTextarea,jsOptions)),queryCodeMirror.on("blur",incChangeCounter),queryCodeMirror.on("change",onCodeMirrorChange))}function removeCodeMirrors(e){evalCodeMirror&&(evalCodeMirror.off("blur",incChangeCounter),evalCodeMirror.off("change",onCodeMirrorChange),evalCodeMirror.toTextArea(),$$invalidate("evalCodeMirror",evalCodeMirror=null)),variablesCodeMirror&&(variablesCodeMirror.off("blur",incChangeCounter),variablesCodeMirror.off("change",onCodeMirrorChange),variablesCodeMirror.toTextArea(),$$invalidate("variablesCodeMirror",variablesCodeMirror=null)),queryCodeMirror&&(queryCodeMirror.off("blur",incChangeCounter),queryCodeMirror.off("change",onCodeMirrorChange),queryCodeMirror.toTextArea(),$$invalidate("queryCodeMirror",queryCodeMirror=null))}function toggleVisibility(e){e&&e.preventDefault(),$$invalidate("vis",vis=!vis),vis?addCodeMirrors():removeCodeMirrors()}function argument_getText_binding(e,{arg:n}){getArgFunctions[n.name]=e,$$invalidate("getArgFunctions",getArgFunctions)}function type_getText_binding(e){$$invalidate("getTypeText",getTypeText=e)}function div3_binding(e,n){$$invalidate("formArea",formArea=e)}function textarea0_binding(e,n){$$invalidate("queryTextarea",queryTextarea=e)}function div5_binding(e,n){$$invalidate("queryFrame",queryFrame=e)}function textarea1_binding(e,n){$$invalidate("variablesTextarea",variablesTextarea=e)}function div8_binding(e,n){$$invalidate("variablesFrame",variablesFrame=e)}function input1_binding(e,n){$$invalidate("attachFileCheckbox",attachFileCheckbox=e)}function change_handler(e){const n=attachFileCheckboxChecked=!(!attachFileCheckbox||!attachFileCheckbox.checked);return $$invalidate("attachFileCheckboxChecked",attachFileCheckboxChecked),n}function form_1_binding(e,n){$$invalidate("form",form=e)}function div15_binding(e,n){$$invalidate("responseArea",responseArea=e)}function textarea2_binding(e,n){$$invalidate("evalTextarea",evalTextarea=e)}function div18_binding(e,n){$$invalidate("evalFrame",evalFrame=e)}return onMount(async()=>{window.$(formArea).resizable({handles:"e"}),window.$(form).resizable({handles:"e"}),window.$(queryFrame).resizable({handles:"s"}),window.$(variablesFrame).resizable({handles:"s"}),window.$(evalFrame).resizable({handles:"s"}),console.log("on mount ----------------------------------------------"),generateQuery(node)}),$$self.$set=(e=>{"urlElement"in e&&$$invalidate("urlElement",urlElement=e.urlElement),"credentialsElement"in e&&$$invalidate("credentialsElement",credentialsElement=e.credentialsElement),"parentid"in e&&$$invalidate("parentid",parentid=e.parentid),"scheme"in e&&$$invalidate("scheme",scheme=e.scheme),"node"in e&&$$invalidate("node",node=e.node),"operation"in e&&$$invalidate("operation",operation=e.operation),"test"in e&&$$invalidate("test",test=e.test)}),$$self.$$.update=((e={node:1})=>{e.node&&console.log("node changed -------------")}),{urlElement:urlElement,credentialsElement:credentialsElement,parentid:parentid,scheme:scheme,node:node,operation:operation,test:test,testResult:testResult,evalErrors:evalErrors,vis:vis,request:request,response:response,responseArea:responseArea,evalTextarea:evalTextarea,variablesTextarea:variablesTextarea,queryTextarea:queryTextarea,queryFrame:queryFrame,variablesFrame:variablesFrame,evalFrame:evalFrame,form:form,attachFileCheckbox:attachFileCheckbox,attachFileCheckboxChecked:attachFileCheckboxChecked,formArea:formArea,getTypeText:getTypeText,getArgFunctions:getArgFunctions,generateQuery:generateQuery,submitForm:submitForm,evaluate:evaluate,incChangeCounter:incChangeCounter,toggleVisibility:toggleVisibility,argument_getText_binding:argument_getText_binding,type_getText_binding:type_getText_binding,div3_binding:div3_binding,textarea0_binding:textarea0_binding,div5_binding:div5_binding,textarea1_binding:textarea1_binding,div8_binding:div8_binding,input1_binding:input1_binding,change_handler:change_handler,form_1_binding:form_1_binding,div15_binding:div15_binding,textarea2_binding:textarea2_binding,div18_binding:div18_binding}}class Func extends SvelteComponent{constructor(e){super(),init(this,e,instance$5,create_fragment$5,safe_not_equal,["urlElement","credentialsElement","parentid","scheme","node","operation","test"])}}function get_each_context$2(e,n,t){const a=Object.create(e);return a.t=n[t],a}function get_each_context_1(e,n,t){const a=Object.create(e);return a.e=n[t],a}function get_each_context_2(e,n,t){const a=Object.create(e);return a.e=n[t],a}function create_each_block_2(e,n){var t,a,i;function l(e){n.func_test_binding.call(null,e,n),a=!0,add_flush_callback(()=>a=!1)}let r={credentialsElement:n.credentialsElement,urlElement:n.urlElement,node:n.e,operation:"query",scheme:n.scheme,parentid:n.parentid+"-query"};void 0!==n.testFunctions[n.e.name]&&(r.test=n.testFunctions[n.e.name]);var o=new Func({props:r});return add_binding_callback(()=>bind(o,"test",l)),{key:e,first:null,c(){t=element("div"),o.$$.fragment.c(),this.first=t},m(e,n){insert(e,t,n),mount_component(o,t,null),i=!0},p(e,t){n=t;var i={};e.credentialsElement&&(i.credentialsElement=n.credentialsElement),e.urlElement&&(i.urlElement=n.urlElement),e.queries&&(i.node=n.e),e.scheme&&(i.scheme=n.scheme),e.parentid&&(i.parentid=n.parentid+"-query"),(!a&&e.testFunctions||e.queries)&&(i.test=n.testFunctions[n.e.name]),o.$set(i)},i(e){i||(o.$$.fragment.i(e),i=!0)},o(e){o.$$.fragment.o(e),i=!1},d(e){e&&detach(t),o.$destroy()}}}function create_each_block_1(e,n){var t,a,i;function l(e){n.func_test_binding_1.call(null,e,n),a=!0,add_flush_callback(()=>a=!1)}let r={credentialsElement:n.credentialsElement,urlElement:n.urlElement,node:n.e,operation:"mutation",scheme:n.scheme,parentid:n.parentid+"-mutation"};void 0!==n.testFunctions[n.e.name]&&(r.test=n.testFunctions[n.e.name]);var o=new Func({props:r});return add_binding_callback(()=>bind(o,"test",l)),{key:e,first:null,c(){t=element("div"),o.$$.fragment.c(),this.first=t},m(e,n){insert(e,t,n),mount_component(o,t,null),i=!0},p(e,t){n=t;var i={};e.credentialsElement&&(i.credentialsElement=n.credentialsElement),e.urlElement&&(i.urlElement=n.urlElement),e.mutations&&(i.node=n.e),e.scheme&&(i.scheme=n.scheme),e.parentid&&(i.parentid=n.parentid+"-mutation"),(!a&&e.testFunctions||e.mutations)&&(i.test=n.testFunctions[n.e.name]),o.$set(i)},i(e){i||(o.$$.fragment.i(e),i=!0)},o(e){o.$$.fragment.o(e),i=!1},d(e){e&&detach(t),o.$destroy()}}}function create_each_block$2(e){var n,t,a,i=new Type({props:{showCheckbox:!1,typeName:e.t.name,scheme:e.scheme,parentid:e.parentid+"-usertypes"}});return{c(){n=element("div"),i.$$.fragment.c(),t=space()},m(e,l){insert(e,n,l),mount_component(i,n,null),append(n,t),a=!0},p(e,n){var t={};e.usertypes&&(t.typeName=n.t.name),e.scheme&&(t.scheme=n.scheme),e.parentid&&(t.parentid=n.parentid+"-usertypes"),i.$set(t)},i(e){a||(i.$$.fragment.i(e),a=!0)},o(e){i.$$.fragment.o(e),a=!1},d(e){e&&detach(n),i.$destroy()}}}function create_fragment$6(e){var n,t,a,i,l,r,o,s,c,d,u=[],p=new Map,m=[],b=new Map,_=e.queries;const g=e=>e.e.name;for(var h=0;h<_.length;h+=1){let n=get_each_context_2(e,_,h),t=g(n);p.set(t,u[h]=create_each_block_2(t,n))}var f=e.mutations;const v=e=>e.e.name;for(h=0;h<f.length;h+=1){let n=get_each_context_1(e,f,h),t=v(n);b.set(t,m[h]=create_each_block_1(t,n))}var $=e.usertypes,y=[];for(h=0;h<$.length;h+=1)y[h]=create_each_block$2(get_each_context$2(e,$,h));function k(e,n,t){y[e]&&(n&&on_outro(()=>{y[e].d(n),y[e]=null}),y[e].o(t))}return{c(){for(n=element("div"),(t=element("h4")).textContent="Queries",a=space(),d=0;d<u.length;d+=1)u[d].c();for(i=space(),(l=element("h4")).textContent="Mutations",r=space(),d=0;d<m.length;d+=1)m[d].c();o=space(),(s=element("h4")).textContent="User types",c=space();for(var d=0;d<y.length;d+=1)y[d].c();n.className="svelte-12z8bpo",toggle_class(n,"noscheme",e.noscheme)},m(e,p){for(insert(e,n,p),append(n,t),append(n,a),b=0;b<u.length;b+=1)u[b].m(n,null);for(append(n,i),append(n,l),append(n,r),b=0;b<m.length;b+=1)m[b].m(n,null);append(n,o),append(n,s),append(n,c);for(var b=0;b<y.length;b+=1)y[b].m(n,null);d=!0},p(e,t){const a=t.queries;group_outros(),u=update_keyed_each(u,e,g,1,t,a,p,n,outro_and_destroy_block,create_each_block_2,i,get_each_context_2),check_outros();const l=t.mutations;if(group_outros(),m=update_keyed_each(m,e,v,1,t,l,b,n,outro_and_destroy_block,create_each_block_1,o,get_each_context_1),check_outros(),e.usertypes||e.scheme||e.parentid){$=t.usertypes;for(var r=0;r<$.length;r+=1){const a=get_each_context$2(t,$,r);y[r]?(y[r].p(e,a),y[r].i(1)):(y[r]=create_each_block$2(a),y[r].c(),y[r].i(1),y[r].m(n,null))}for(group_outros();r<y.length;r+=1)k(r,1,1);check_outros()}e.noscheme&&toggle_class(n,"noscheme",t.noscheme)},i(e){if(!d){for(var n=0;n<_.length;n+=1)u[n].i();for(n=0;n<f.length;n+=1)m[n].i();for(n=0;n<$.length;n+=1)y[n].i();d=!0}},o(e){for(h=0;h<u.length;h+=1)u[h].o();for(h=0;h<m.length;h+=1)m[h].o();y=y.filter(Boolean);for(let e=0;e<y.length;e+=1)k(e,0);d=!1},d(e){for(e&&detach(n),h=0;h<u.length;h+=1)u[h].d();for(h=0;h<m.length;h+=1)m[h].d();destroy_each(y,e)}}}function compareTypes(e,n){return e.name>n.name?1:e.name<n.name?-1:0}function instance$6(e,n,t){let{scheme:a,urlElement:i,credentialsElement:l,parentid:r="",doTests:o=function(){for(let[e,n]of Object.entries(m))n()}}=n,s=[],c=[],d=[],u=[],p=!0,m={};return e.$set=(e=>{"scheme"in e&&t("scheme",a=e.scheme),"urlElement"in e&&t("urlElement",i=e.urlElement),"credentialsElement"in e&&t("credentialsElement",l=e.credentialsElement),"parentid"in e&&t("parentid",r=e.parentid),"doTests"in e&&t("doTests",o=e.doTests)}),e.$$.update=((e={scheme:1})=>{if(e.scheme){t("mutations",s=[]),t("queries",c=[]),t("types",d=[]),t("usertypes",u=[]);try{t("noscheme",p=0==Object.entries(a).length),t("mutations",s=a.data.__schema.mutationType.fields),t("queries",c=a.data.__schema.queryType.fields),t("types",d=a.data.__schema.types.sort(compareTypes)),t("usertypes",u=a.data.__schema.types.filter(e=>"_"!=e.name[0]&&"OBJECT"==e.kind&&"Query"!=e.name&&"Mutation"!=e.name).sort(compareTypes))}catch(e){}}}),{scheme:a,urlElement:i,credentialsElement:l,parentid:r,doTests:o,mutations:s,queries:c,usertypes:u,noscheme:p,testFunctions:m,func_test_binding:function(e,{e:n}){m[n.name]=e,t("testFunctions",m)},func_test_binding_1:function(e,{e:n}){m[n.name]=e,t("testFunctions",m)}}}class List extends SvelteComponent{constructor(e){super(),init(this,e,instance$6,create_fragment$6,safe_not_equal,["scheme","urlElement","credentialsElement","parentid","doTests"])}}function create_fragment$7(e){var n,t,a,i,l,r,o,s,c,d,u,p,m,b,_;function g(n){e.schemer_credentialsElement_binding.call(null,n),r=!0,add_flush_callback(()=>r=!1)}function h(n){e.schemer_urlElement_binding.call(null,n),o=!0,add_flush_callback(()=>o=!1)}function f(n){e.schemer_scheme_binding.call(null,n),s=!0,add_flush_callback(()=>s=!1)}let v={parentid:e.parentid+"-Schemer"};void 0!==e.credentialsElement&&(v.credentialsElement=e.credentialsElement),void 0!==e.urlElement&&(v.urlElement=e.urlElement),void 0!==e.scheme&&(v.scheme=e.scheme);var $=new Schemer({props:v});function y(n){e.list_doTests_binding.call(null,n),m=!0,add_flush_callback(()=>m=!1)}add_binding_callback(()=>e.schemer_binding($)),add_binding_callback(()=>bind($,"credentialsElement",g)),add_binding_callback(()=>bind($,"urlElement",h)),add_binding_callback(()=>bind($,"scheme",f)),$.$on("clear",e.clearStorageItemScheme);let k={parentid:e.parentid+"-List",credentialsElement:e.credentialsElement,urlElement:e.urlElement,scheme:e.scheme};void 0!==e.doTests&&(k.doTests=e.doTests);var x=new List({props:k});return add_binding_callback(()=>bind(x,"doTests",y)),{c(){n=element("div"),t=element("div"),(a=element("div")).textContent="Enter GraphQL endpoint. For example https://yoursite.com/graphql",i=space(),l=element("div"),$.$$.fragment.c(),c=space(),d=element("input"),u=space(),p=element("div"),x.$$.fragment.c(),a.className="smaller svelte-xun2ts",attr(d,"type","button"),d.className="button svelte-xun2ts",d.value="run all tests",l.className="row svelte-xun2ts",p.className="main",t.className="root svelte-xun2ts",n.className="hidden svelte-xun2ts",toggle_class(n,"visible",e.visible),_=listen(d,"click",e.doAllTests)},m(r,o){insert(r,n,o),append(n,t),append(t,a),append(t,i),append(t,l),mount_component($,l,null),append(l,c),append(l,d),append(t,u),append(t,p),mount_component(x,p,null),add_binding_callback(()=>e.div2_binding(p,null)),b=!0},p(e,t){var a={};e.parentid&&(a.parentid=t.parentid+"-Schemer"),!r&&e.credentialsElement&&(a.credentialsElement=t.credentialsElement),!o&&e.urlElement&&(a.urlElement=t.urlElement),!s&&e.scheme&&(a.scheme=t.scheme),$.$set(a);var i={};e.parentid&&(i.parentid=t.parentid+"-List"),e.credentialsElement&&(i.credentialsElement=t.credentialsElement),e.urlElement&&(i.urlElement=t.urlElement),e.scheme&&(i.scheme=t.scheme),!m&&e.doTests&&(i.doTests=t.doTests),x.$set(i),e.items&&(t.div2_binding(null,p),t.div2_binding(p,null)),e.visible&&toggle_class(n,"visible",t.visible)},i(e){b||($.$$.fragment.i(e),x.$$.fragment.i(e),b=!0)},o(e){$.$$.fragment.o(e),x.$$.fragment.o(e),b=!1},d(t){t&&detach(n),e.schemer_binding(null),$.$destroy(),x.$destroy(),e.div2_binding(null,p),_()}}}function instance$7(e,n,t){let a,i,l,r,o,s,{parentid:c="tab1",visible:d=!0,url:u=""}=n,p={};function m(e){let n=[];if(!o)return n;let t=o.getElementsByTagName(e);for(let a of t){let t=a.getAttribute("id");if(!t)continue;"-"==t[0]&&console.log(t);let i="textarea"==e?"textarea":a.getAttribute("type"),l=a.value,r=a.checked;n.push({id:t,type:i,checked:r,value:l})}return n}function b(){if(!s)return;let e=0;for(let n of s){let t=document.getElementById(n.id);t&&(e++,"checkbox"==n.type?t.checked=n.checked:t.value=n.value)}console.log(e,"condrols have been restored.")}function _(){let e=c,n=localStorage.getItem(e);if(!n)return;let l=JSON.parse(n);a.value=l.url,t("urlElement",a),t("url",u),i.checked=l.credentials,t("credentialsElement",i),t("scheme",p=l.scheme),console.log("restored tab=",e,n.length),t("controls",s=l.controls)}return afterUpdate(()=>{console.log("afterUpdate parentid=",c),_(),setTimeout(b,0)}),e.$set=(e=>{"parentid"in e&&t("parentid",c=e.parentid),"visible"in e&&t("visible",d=e.visible),"url"in e&&t("url",u=e.url)}),e.$$.update=((e={urlElement:1,url:1})=>{(e.urlElement||e.url)&&a&&(console.log("url=",u),a.value=u,t("urlElement",a),t("url",u))}),{parentid:c,visible:d,url:u,urlElement:a,credentialsElement:i,schemerElement:l,scheme:p,doTests:r,mainArea:o,doAllTests:function(){r()},clearStorageItemScheme:function(){localStorage.removeItem(c),console.log("App: clearStorageItemScheme: ",c)},reloadSchema:function(){l.getSchema()},saveInputs:function(){let e=c,n=function(){let e=m("input"),n=m("textarea");return e.concat(n)}();if(!n||0==n.length)return void console.log("No controls");let t={url:a.value,credentials:i.checked,controls:n,scheme:p},l=JSON.stringify(t);localStorage.setItem(e,l),console.log("saved: ",e,l.length)},restoreInputs:_,schemer_binding:function(e){t("schemerElement",l=e)},schemer_credentialsElement_binding:function(e){t("credentialsElement",i=e)},schemer_urlElement_binding:function(e){t("urlElement",a=e),t("url",u)},schemer_scheme_binding:function(e){t("scheme",p=e)},list_doTests_binding:function(e){t("doTests",r=e)},div2_binding:function(e,n){t("mainArea",o=e)}}}class App extends SvelteComponent{constructor(e){super(),init(this,e,instance$7,create_fragment$7,safe_not_equal,["parentid","visible","url","reloadSchema","saveInputs","restoreInputs"])}get reloadSchema(){return this.$$.ctx.reloadSchema}get saveInputs(){return this.$$.ctx.saveInputs}get restoreInputs(){return this.$$.ctx.restoreInputs}}function create_fragment$8(e){var n,t,a,i,l,r,o,s,c,d,u,p,m,b,_;return{c(){n=element("div"),t=element("div"),(a=element("div")).textContent="×",i=space(),l=element("div"),r=space(),o=element("div"),s=element("input"),c=element("br"),d=space(),u=element("div"),(p=element("button")).textContent="Cancel",m=space(),(b=element("button")).textContent="Ok",a.className="close svelte-tpcynl",l.className="message svelte-tpcynl",s.className="input svelte-tpcynl",s.value="",o.className="input-row svelte-tpcynl",p.className="svelte-tpcynl",b.className="svelte-tpcynl",u.className="buttons svelte-tpcynl",t.className="modal-content svelte-tpcynl",attr(t,"onclick","event.stopPropagation()"),n.className="modal svelte-tpcynl",toggle_class(n,"hidden",e.hidden),_=[listen(a,"click",e.hideDialog),listen(s,"keyup",e.onkeyup),listen(p,"click",e.hideDialog),listen(b,"click",e.okPressed),listen(n,"click",e.hideDialog)]},m(_,g){insert(_,n,g),append(n,t),append(t,a),append(t,i),append(t,l),add_binding_callback(()=>e.div1_binding(l,null)),append(t,r),append(t,o),append(o,s),add_binding_callback(()=>e.input_1_binding(s,null)),append(o,c),append(t,d),append(t,u),append(u,p),append(u,m),append(u,b)},p(e,t){e.items&&(t.div1_binding(null,l),t.div1_binding(l,null)),e.items&&(t.input_1_binding(null,s),t.input_1_binding(s,null)),e.hidden&&toggle_class(n,"hidden",t.hidden)},i:noop,o:noop,d(t){t&&detach(n),e.div1_binding(null,l),e.input_1_binding(null,s),run_all(_)}}}function instance$8(e,n,t){let a,i,l=!0,r=null;function o(){t("hidden",l=!0)}function s(){o(),"function"==typeof r&&r(i.value)}return{hidden:l,message:a,input:i,showDialog:function(e,n,o){t("callback",r=o),a.innerText=e,t("message",a),i.value=n,t("input",i),t("hidden",l=!1),setTimeout(()=>i.focus())},hideDialog:o,okPressed:s,onkeyup:function(e){console.log(e.keyCode),13===e.keyCode?(e.preventDefault(),s()):27===e.keyCode&&(e.preventDefault(),o())},div1_binding:function(e,n){t("message",a=e)},input_1_binding:function(e,n){t("input",i=e)}}}class Dialog extends SvelteComponent{constructor(e){super(),init(this,e,instance$8,create_fragment$8,safe_not_equal,["showDialog","hideDialog"])}get showDialog(){return this.$$.ctx.showDialog}get hideDialog(){return this.$$.ctx.hideDialog}}function get_each_context$3(e,n,t){const a=Object.create(e);return a.tab=n[t],a}function create_each_block$3(e,n){var t,a,i,l,r,o,s,c,d,u,p,m,b,_,g,h,f=n.tab.tabName;return{key:e,first:null,c(){t=element("span"),a=text(f),i=space(),l=element("span"),r=text("×"),c=space(),d=element("div"),u=element("input"),m=space(),b=element("input"),l.className="x svelte-m7qdnd",l.title=o="delete "+n.tab.tabName+" tab",l.dataset.tabname=s=n.tab.tabName,attr(u,"type","button"),u.className="button-tiny svelte-m7qdnd",u.title=p="Rename "+n.active.tabName+" tab",u.value="rename",attr(b,"type","button"),b.className="button-tiny svelte-m7qdnd",b.title=_="Save "+n.active.tabName+" to a file",b.value="export",d.className="tabmenu svelte-m7qdnd",t.className="tab svelte-m7qdnd",t.dataset.tabname=g=n.tab.tabName,toggle_class(t,"active",n.tab.tabName==n.active.tabName),h=[listen(l,"click",n.deleteTab),listen(u,"click",n.renameTab),listen(b,"click",n.exportTab),listen(t,"click",n.activate)],this.first=t},m(e,n){insert(e,t,n),append(t,a),append(t,i),append(t,l),append(l,r),append(t,c),append(t,d),append(d,u),append(d,m),append(d,b)},p(e,n){e.tabs&&f!==(f=n.tab.tabName)&&set_data(a,f),e.tabs&&o!==(o="delete "+n.tab.tabName+" tab")&&(l.title=o),e.tabs&&s!==(s=n.tab.tabName)&&(l.dataset.tabname=s),e.active&&p!==(p="Rename "+n.active.tabName+" tab")&&(u.title=p),e.active&&_!==(_="Save "+n.active.tabName+" to a file")&&(b.title=_),e.tabs&&g!==(g=n.tab.tabName)&&(t.dataset.tabname=g),(e.tabs||e.active)&&toggle_class(t,"active",n.tab.tabName==n.active.tabName)},d(e){e&&detach(t),run_all(h)}}}function create_fragment$9(e){var n,t,a,i,l,r,o,s,c,d,u=[],p=new Map;var m=new Dialog({props:{}});add_binding_callback(()=>e.dialog_1_binding(m));var b=e.tabs;const _=e=>e.tab.tabName;for(var g=0;g<b.length;g+=1){let n=get_each_context$3(e,b,g),t=_(n);p.set(t,u[g]=create_each_block$3(t,n))}return{c(){for(n=element("div"),m.$$.fragment.c(),t=space(),g=0;g<u.length;g+=1)u[g].c();a=space(),(i=element("span")).textContent="    ＋    ",l=space(),(r=element("span")).textContent="import",o=space(),s=element("input"),i.title="Add a new tab",i.className="button-tiny svelte-m7qdnd",set_style(i,"font-weight","bold"),r.title="Import tab from a file",r.className="button-tiny svelte-m7qdnd",s.id="fileChooser",attr(s,"type","file"),set_style(s,"display","none"),n.className="container svelte-m7qdnd",d=[listen(i,"click",e.addTab),listen(r,"click",importTab),listen(s,"change",e.openFile)]},m(e,d){for(insert(e,n,d),mount_component(m,n,null),append(n,t),g=0;g<u.length;g+=1)u[g].m(n,null);append(n,a),append(n,i),append(n,l),append(n,r),append(n,o),append(n,s),c=!0},p(e,t){m.$set({});const i=t.tabs;u=update_keyed_each(u,e,_,1,t,i,p,n,destroy_block,create_each_block$3,a,get_each_context$3)},i(e){c||(m.$$.fragment.i(e),c=!0)},o(e){m.$$.fragment.o(e),c=!1},d(t){for(t&&detach(n),e.dialog_1_binding(null),m.$destroy(),g=0;g<u.length;g+=1)u[g].d();run_all(d)}}}function getTabsFromLocalStorage(){let e=[],n=Object.keys(localStorage);n.sort();for(let t of n){let n=localStorage.getItem(t);if(!n)continue;let a=JSON.parse(n);e.push({tabName:t,url:(" "+a.url).slice(1),scheme:a.scheme})}return e}function fixLocalStorageData(e,n,t){if(!e)return e;let a=JSON.parse(e);if(!a)return e;if(!a.controls)return e;for(let e of a.controls)e.id=e.id.replace(n,t);return JSON.stringify(a)}function importTab(){document.getElementById("fileChooser").click()}function instance$9(e,n,t){let a,{tabs:i=[],active:l}=n;const r=createEventDispatcher();function o(e,n){let a={tabName:e,url:n};t("tabs",i=[...i,a]),t("active",l=a),r("save",{tab:l})}function s(e){e&&(i.some(n=>e==n.tabName)?a.showDialog(`"${e}" already exists. Please try again.`,e,s):o(e,"https://auth-proxy.rg.ru/graphql"))}function c(e){let n=localStorage.getItem(e);return localStorage.removeItem(e),t("tabs",i=i.filter(n=>n.tabName!=e)),t("active",l=i.length>0?i[0]:null),n}return onMount(async()=>{let e=getTabsFromLocalStorage();t("tabs",i=0==e.length?[]:e),t("active",l=i[0]),r("mounted")}),e.$set=(e=>{"tabs"in e&&t("tabs",i=e.tabs),"active"in e&&t("active",l=e.active)}),{tabs:i,active:l,dialog:a,activate:function(e){let n=this.getAttribute("data-tabName");t("active",l=i.find(e=>e.tabName==n))},addNewTab:o,addTab:function(){a.showDialog("Enter a new tab name","new",s)},setActiveTabByName:function(e){let n=i.findIndex(n=>n.tabName==e);-1!=n&&t("active",l=i[n])},deleteTab:function(){c(this.getAttribute("data-tabName"))},exportTab:function(){let e=this.parentElement.parentElement.getAttribute("data-tabName"),n=localStorage.getItem(e),t=JSON.parse(n);t.tabName=e;let a=JSON.stringify(t);var i=new Blob([a],{type:"text/plain"}),r=document.createElement("a");r.download=l.tabName+".json",r.href=window.URL.createObjectURL(i),r.click()},openFile:function(e){var n=e.target,a=new FileReader;a.onload=function(){!function(e){if(!e)return;var n=JSON.parse(e);if(!n)return;var a=n.tabName;if(!a)return;localStorage.setItem(a,e);let r=getTabsFromLocalStorage();t("tabs",i=r),t("active",l=n)}(a.result)},a.readAsText(n.files[0])},renameTab:function(){let e=l.tabName,n=l.url,a=l.scheme,r=e;for(;i.some(e=>r==e.tabName);)if(!(r=prompt(`Rename "${r}"`,r)))return;let o=c(e);if(!r)return;let s={tabName:r,url:n,scheme:a};if(t("tabs",i=[...i,s]),t("active",l=s),o){let n=fixLocalStorageData(o,e,r);localStorage.setItem(r,n)}},dialog_1_binding:function(e){t("dialog",a=e)}}}class Tabs extends SvelteComponent{constructor(e){super(),init(this,e,instance$9,create_fragment$9,safe_not_equal,["tabs","active","addNewTab","setActiveTabByName"])}get addNewTab(){return this.$$.ctx.addNewTab}get setActiveTabByName(){return this.$$.ctx.setActiveTabByName}}function get_each_context$4(e,n,t){const a=Object.create(e);return a.tab=n[t],a}function create_each_block$4(e,n){var t,a,i,l;function r(e){n.app_saveInputs_binding.call(null,e,n),a=!0,add_flush_callback(()=>a=!1)}function o(e){n.app_reloadSchema_binding.call(null,e,n),i=!0,add_flush_callback(()=>i=!1)}let s={parentid:n.tab.tabName,url:n.tab.url,visible:n.tab.tabName==n.active.tabName};void 0!==n.tabsSaveFunctions[n.tab.tabName]&&(s.saveInputs=n.tabsSaveFunctions[n.tab.tabName]),void 0!==n.tabsReloadFunctions[n.tab.tabName]&&(s.reloadSchema=n.tabsReloadFunctions[n.tab.tabName]);var c=new App({props:s});return add_binding_callback(()=>bind(c,"saveInputs",r)),add_binding_callback(()=>bind(c,"reloadSchema",o)),{key:e,first:null,c(){t=empty(),c.$$.fragment.c(),this.first=t},m(e,n){insert(e,t,n),mount_component(c,e,n),l=!0},p(e,t){n=t;var l={};e.tabs&&(l.parentid=n.tab.tabName),e.tabs&&(l.url=n.tab.url),(e.tabs||e.active)&&(l.visible=n.tab.tabName==n.active.tabName),(!a&&e.tabsSaveFunctions||e.tabs)&&(l.saveInputs=n.tabsSaveFunctions[n.tab.tabName]),(!i&&e.tabsReloadFunctions||e.tabs)&&(l.reloadSchema=n.tabsReloadFunctions[n.tab.tabName]),c.$set(l)},i(e){l||(c.$$.fragment.i(e),l=!0)},o(e){c.$$.fragment.o(e),l=!1},d(e){e&&detach(t),c.$destroy(e)}}}function create_fragment$a(e){var n,t,a,i,l,r=[],o=new Map;function s(n){e.tabs_1_tabs_binding.call(null,n),t=!0,add_flush_callback(()=>t=!1)}function c(n){e.tabs_1_active_binding.call(null,n),a=!0,add_flush_callback(()=>a=!1)}let d={};void 0!==e.tabs&&(d.tabs=e.tabs),void 0!==e.active&&(d.active=e.active);var u=new Tabs({props:d});add_binding_callback(()=>e.tabs_1_binding(u)),add_binding_callback(()=>bind(u,"tabs",s)),add_binding_callback(()=>bind(u,"active",c)),u.$on("save",e.saveTab),u.$on("mounted",e.onTabsMounted);var p=e.tabs;const m=e=>e.tab.tabName;for(var b=0;b<p.length;b+=1){let n=get_each_context$4(e,p,b),t=m(n);o.set(t,r[b]=create_each_block$4(t,n))}return{c(){for(n=element("div"),u.$$.fragment.c(),i=space(),b=0;b<r.length;b+=1)r[b].c();n.className="apptabbed"},m(e,t){for(insert(e,n,t),mount_component(u,n,null),append(n,i),b=0;b<r.length;b+=1)r[b].m(n,null);l=!0},p(e,i){var l={};!t&&e.tabs&&(l.tabs=i.tabs),!a&&e.active&&(l.active=i.active),u.$set(l);const s=i.tabs;group_outros(),r=update_keyed_each(r,e,m,1,i,s,o,n,outro_and_destroy_block,create_each_block$4,null,get_each_context$4),check_outros()},i(e){if(!l){u.$$.fragment.i(e);for(var n=0;n<p.length;n+=1)r[n].i();l=!0}},o(e){for(u.$$.fragment.o(e),b=0;b<r.length;b+=1)r[b].o();l=!1},d(t){for(t&&detach(n),e.tabs_1_binding(null),u.$destroy(),b=0;b<r.length;b+=1)r[b].d()}}}function instance$a(e,n,t){let a,i,l=[],r={},o={};changeCount.subscribe(e=>{console.log("From AppTabbed changeCount=",e),clearTimeout(u),t("saveTimeout",u=setTimeout(s,1e3))});function s(){i&&i.tabName&&r[i.tabName]&&(r[i.tabName](),console.log("SAVED"))}function c(){console.log("reloadActiveTab"),i&&i.tabName&&o[i.tabName]&&(o[i.tabName](),console.log("RELOADED"))}var d,u;function p(){console.log("delayAndReload"),clearTimeout(d),t("reloadTimeout",d=setTimeout(c,1e3))}function m(e){let n=l.findIndex(n=>n.tabName==e);return-1==n?null:l[n]}return{tabsElement:a,tabs:l,active:i,tabsSaveFunctions:r,tabsReloadFunctions:o,saveTab:s,onTabsMounted:function(e){!function(){console.log("AppTabbed createOrActivateTab");let e=new URLSearchParams(window.location.search);var n=e.get("end_point"),t=e.get("tab_name");if(!n||!t)return;console.log(t,n),console.log(l);let i=m(t);if(!i)return a.addNewTab(t,n),void p();if(i.tabName==t&&i.url==n)return a.setActiveTabByName(t),void p();if(i.tabName!=t||i.url==n);else{let e=t;for(let i=1;i<100;i++)if(!m(e=t+i))return a.addNewTab(e,n),void p();alert("can not create a new tab: "+t)}}()},tabs_1_binding:function(e){t("tabsElement",a=e)},tabs_1_tabs_binding:function(e){t("tabs",l=e)},tabs_1_active_binding:function(e){t("active",i=e)},app_saveInputs_binding:function(e,{tab:n}){r[n.tabName]=e,t("tabsSaveFunctions",r)},app_reloadSchema_binding:function(e,{tab:n}){o[n.tabName]=e,t("tabsReloadFunctions",o)}}}class AppTabbed extends SvelteComponent{constructor(e){super(),init(this,e,instance$a,create_fragment$a,safe_not_equal,[])}}var app=new AppTabbed({target:document.getElementById("graphql-test")?document.getElementById("graphql-test"):document.body});return app}();
//# sourceMappingURL=bundle.js.map
